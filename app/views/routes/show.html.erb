<%= render(:partial => "search_small") %>

<h1>
	<%=h @route.name %>
</h1>

<div id="map_canvas">

</div>

<div id="summary">
	<h2>Route Summary</h2>
	<p>
		<b>Name:</b>
		<%=h @route.name %>
	</p>
	<p>
		<b>Creation date:</b>
		<%=h @route.created_at %>
	</p>
	<p>
		<b>Last update:</b>
		<%=h @route.updated_at %>
	</p>
	<p>
		<b>Author:</b>
		<%=h @route.user.login %>
	</p>
	<p>
		<b>Description:</b>
		<%=h @route.description %>
	</p>

	<div id="addplace">
		<% if current_user %>
		<% if current_user.id == @route.user_id %>
		<%= render(:partial => "/routes/addtoroute", :object => @place) %>
		<% end %>
		<% end %>
	</div>

	<p>
		<b>Places:</b>
		<% if @route.places.empty? %>
		This route is empty (have not any place).
		<% else %>
		<ul>
			<% @route.places.each do |r| %>
			<li class="routepoints"><a href="<%=place_path(r)%>"><%=h r.name %></a></li>
			<% end %>
		</ul>
		<% end %>	
	</p>


	<p>
		<b>Rate Average:</b>
		<!--		#To display average with static stars: -->
	</p>
	<%= ratings_for @route, :static, :dimension => :rank %>

	<p class="edit_links">
		<% if current_user %>
		<% if current_user.id == @route.user_id %>
		<%= link_to 'Edit route', edit_route_path(@route) %>
		<% end %>
		<% end %>
	</p>
</div>

<% if current_user %>
<div class="ratings">
	<h3>
		Your rating:
	</h3>
	<!--	# To display the rating for the current user (current_user): -->
	<%= ratings_for @route, :dimension => :rank, :show_user_rating => true %>
</div>
<% end %>

<div id="comments">

	<%= render(:partial => "/routecomments/list", :object => @route) %> 
	<%= render(:partial => "/routecomments/new", :object => @route) %>


	<p id="comeback_links">
		<%= link_to 'New route', new_route_path %> |
		<%= link_to 'Back', routes_path %>
	</p>
</div>